<div class="preview-backdrop" (click)="onBackdropClick($event)">
    <div class="preview-container">
        <!-- Header -->
        <header class="preview-header" *ngIf="titleContent">
            <div class="header-content">
                <ng-content select="[preview-title]"></ng-content>
            </div>
            <button class="close-btn" (click)="close.emit()" aria-label="Close preview">
                <mat-icon>close</mat-icon>
            </button>
        </header>

        <!-- Floating Close Button (when header is hidden) -->
        <button class="floating-close-btn" *ngIf="!titleContent" (click)="close.emit()" aria-label="Close preview">
            <mat-icon>close</mat-icon>
        </button>

        <!-- Main Content Area -->
        <div class="preview-body">
            <!-- Hover Navigation Zones -->
            <div class="nav-zone left" [class.visible]="hasPrevious" (click)="hasPrevious && previous.emit()">
                <div class="zone-indicator">
                    <mat-icon>chevron_left</mat-icon>
                </div>
            </div>

            <div class="nav-zone right" [class.visible]="hasNext" (click)="hasNext && next.emit()">
                <div class="zone-indicator">
                    <mat-icon>chevron_right</mat-icon>
                </div>
            </div>

            <!-- Content -->
            <div class="content-wrapper">
                <div *ngIf="isLoading" class="loading-overlay">
                    <div class="spinner"></div>
                </div>

                <ng-content></ng-content>
            </div>
        </div>

        <!-- Footer Panel -->
        <div class="preview-footer">
            <button class="footer-nav-btn" [disabled]="!hasPrevious || isLoading" (click)="previous.emit()"
                aria-label="Previous item">
                <mat-icon>arrow_back</mat-icon>
            </button>

            <div class="footer-content" *ngIf="footerContent">
                <ng-content select="[preview-footer]"></ng-content>
            </div>
            <div class="footer-placeholder" *ngIf="!footerContent"></div>

            <button class="footer-nav-btn" [disabled]="!hasNext || isLoading" (click)="next.emit()"
                aria-label="Next item">
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
    </div>
</div>