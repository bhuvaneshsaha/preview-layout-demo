<div class="preview-backdrop" (click)="onBackdropClick($event)">
    <div class="preview-container">
        <!-- Header -->
        <header class="preview-header" *ngIf="titleContent">
            <div class="header-content">
                <ng-content select="[preview-title]"></ng-content>
            </div>
            <button class="close-btn" [disabled]="closeLocked" (click)="close.emit()" aria-label="Close preview">
                <mat-icon>close</mat-icon>
            </button>
        </header>

        <!-- Floating Close Button (when header is hidden) -->
        <button class="floating-close-btn" *ngIf="!titleContent" [disabled]="closeLocked" (click)="close.emit()"
            aria-label="Close preview">
            <mat-icon>close</mat-icon>
        </button>

        <!-- Main Content Area -->
        <div class="preview-body">
            <!-- Hover Navigation Zones -->
            <div class="nav-zone left" [class.visible]="hasPrevious && !navigationLocked"
                (click)="hasPrevious && !navigationLocked && previous.emit()">
                <div class="zone-indicator">
                    <mat-icon>chevron_left</mat-icon>
                </div>
            </div>

            <div class="nav-zone right" [class.visible]="hasNext && !navigationLocked"
                (click)="hasNext && !navigationLocked && next.emit()">
                <div class="zone-indicator">
                    <mat-icon>chevron_right</mat-icon>
                </div>
            </div>

            <!-- Content -->
            <div class="content-wrapper">
                <div *ngIf="isLoading" class="loading-overlay">
                    <div class="spinner"></div>
                </div>

                <ng-content></ng-content>
            </div>
        </div>

        <!-- Footer Panel -->
        <div class="preview-footer" *ngIf="footerContent">
            <ng-content select="[preview-footer]"></ng-content>
        </div>
    </div>
</div>